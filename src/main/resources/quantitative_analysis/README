Generating statistics over RDF data
-----------------------------------

This directory contains a set of scripts and queries for generating
quantitative analyses and visualizations about the data in a triplestore.

Directory Contents
-------------------

```
sparql/           #-- SPARQL Queries
tpl/              #-- Templates for empty summary tables and HTML
sparql-query.sh   #-- Shell script to execute SPARQL queries
count_for_fun_and_profit.sh   #-- Shell script for the generation of TSV results from SPARQL queries on datasets
build_tables.py   #-- Generate mean values and summaries and visualizations on the data
```

Running the whole shebang
-------------------------

First adapt `count_for_fun_and_profit.sh` to fit your needs (i.e. the set
of SPARQL queries to use and the list of named graphs

```
bash count_for_fun_and_profit.sh
```

Depending on the size of the triplestore, this can take quite a while,
hours even and will produce tables of various size, from a few bytes to a
few hundred MB in `analysis`

Additional tables (averages and summaries) as well as the visualizations
are created with the `build_tables.py` script:

```
python build_tables.py
```

This will create the tables `analysis/averages_*` and
`analysis/numbers-per-dataset.tsv` and create visualization in `out/`.

There are currently four types of visualizations, distinguishable by their
suffix:
* `-bar`: Bar chart with multiple bars for multiple values
* `-stack-bar`: Bar chart with stacked bars for multiple values (good for
  percentages that addd up to 100%
* `-pie`: Pie chart
* `-hist`: Histogram of the frequency of certain value intervals

The filenames of the visualizations contain either the names of the SPARQL
queries they are based on and/or the column name of the relevant column of
values and/or the short version of the dataset.
